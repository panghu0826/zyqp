<div ng-controller="MainCtrl">
    <div class="container-fluid">

        <div class="row-fluid">

            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-info"></i></span>
                    <h5>售卡信息列表</h5>
                    <div class="actions">
                        <button class="btn" ng-click="tmp.editOne = {}; ctrl.isShowSubSaleKa = true;">下级代理售卡系统</button>
                    </div>
                </div>
                <div class="widget-content">
                    <form name="queryForm">
                        <table class="table table-bordered table-striped m_top6">
                            <tr ui-layout-col="">
                                <td style="text-align:left;">
                                    手机号
                                </td>
                                <td>
                                    <input type="text" ng-model="query.name" placeholder="输入代理手机号"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" class="al">
                                    <button class="btn-primary" ng-click="queryLl()">查询下级代理房卡</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" class="al">
                                    <button class="btn-primary" ng-click="querySaleFangka()">查询出售房卡记录</button>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>

                <div class="widget-content" id="qryFangka">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <th >代理账号</th>
                            <th >代理级别</th>
                            <th >房卡数量</th>
                        </tr>
                        <tr ng-repeat="one in ll">
                            <td>
                                {{one.subUser}}
                            </td>
                            <td>
                                {{one.subLevel}}
                            </td>
                            <td>
                                {{one.fangkaNum}}
                            </td>
                        </tr>
                    </table>

                    <div ui-pagi="" pager="pager" on-change-page="queryLl(cp)"></div>
                </div>
                <div class="widget-content" id="qrySaleFangka">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <th >id</th>
                            <th >出售账号</th>
                            <th >接受账号</th>
                            <th >房卡数量</th>
                            <th >出售时间</th>
                        </tr>
                        <tr ng-repeat="one in ll">
                            <td>
                                {{one.id}}
                            </td>
                            <td>
                                {{one.saleUser}}
                            </td>
                            <td>
                                {{one.subUser}}
                            </td>
                            <td>
                                {{one.saleFangka}}
                            </td>
                            <td>
                                {{one.ctime}}
                            </td>
                        </tr>
                    </table>

                    <div ui-pagi="" pager="pager" on-change-page="queryLl(cp)"></div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/x-template"
            ui-dialog="{showModel: 'ctrl.isShowSubSaleKa', title: '下级代理售卡', dialogId: 'dialogSubSaleKa', lock: true, fixed: true, ext: {max: false}}">
        <table class="table table-bordered table-striped m_top6" style="width: 600px;" ng-form="tmp.addForm">
            <tr ui-layout-col="">
                <td><label style="color: orange">出售人账号</label><label style="color: red">*</label></td>
                <td><input type="text" ng-model="tmp.editOne.saleUser" ui-valid="r tel"/></td>
            </tr>
            <tr ui-layout-col="">
                <td><label style="color: orange">下级代理账号</label><label style="color: red">*</label></td>
                <td><input type="text" ng-model="tmp.editOne.subUser" ui-valid="r tel"/></td>
            </tr>
            <tr>
                <td><label style="color: orange">出售房卡</label><label style="color: red">*</label></td>
                <td><input type="text" ng-model="tmp.editOne.saleFangka"/></td>
            </tr>
            <tr>
                <label style="color: red"> 温馨提示:账号请填写手机号,勿填写用户名,房卡数量不要超过出售人拥有的,出售人必须是接受人的上级代理</label>
            </tr>
        </table>
        <button class="btn btn-blue" ng-click="subSaleKa()">出售</button>
        <button class="btn" ng-click="ctrl.isShowSubSaleKa = false">关闭</button>
    </script>

</div>